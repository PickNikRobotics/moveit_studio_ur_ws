<?xml version="1.0"?>
  <root main_tree_to_execute="Take Multi Snapshot">
    <!-- ////////// -->
      <BehaviorTree ID="Take Multi Snapshot" _description="Take point cloud snapshots at multiple waypoints">
        <Control ID="Sequence">
            <Action ID="ClearSnapshot"/>
            <Control ID="Sequence">
                <Action ID="MoveToJointState" waypoint_name="Right Wall" planning_group_name="manipulator" controller_names="/joint_trajectory_controller /robotiq_gripper_controller"/>
                <Action ID="GetPointCloud" target_point_cloud_topic="/wrist_mounted_camera/depth/color/points" point_cloud="{point_cloud}" point_cloud_uuid="{request_uuid}" uuid="{take_snapshot.uuid}"/>
                <Action ID="UpdatePlanningScene" point_cloud="{point_cloud}" sensor_name="scene_scan_camera" point_cloud_uuid="{request_uuid}" pcd_topic="/pcd_pointcloud_captures"/>
                <Action ID="WaitForDuration" delay_duration="15"/>
            </Control>
            <Control ID="Sequence">
                <Action ID="MoveToJointState" waypoint_name="Home" planning_group_name="manipulator" controller_names="/joint_trajectory_controller /robotiq_gripper_controller"/>
                <Action ID="GetPointCloud" target_point_cloud_topic="/wrist_mounted_camera/depth/color/points" point_cloud="{point_cloud}" point_cloud_uuid="{request_uuid}" uuid="{take_snapshot.uuid}"/>
                <Action ID="UpdatePlanningScene" point_cloud="{point_cloud}" sensor_name="scene_scan_camera" point_cloud_uuid="{request_uuid}" pcd_topic="/pcd_pointcloud_captures"/>
                <Action ID="WaitForDuration" delay_duration="15"/>
            </Control>
            <Control ID="Sequence">
                <Action ID="MoveToJointState" waypoint_name="Left Wall" planning_group_name="manipulator" controller_names="/joint_trajectory_controller /robotiq_gripper_controller"/>
                <Action ID="GetPointCloud" target_point_cloud_topic="/wrist_mounted_camera/depth/color/points" point_cloud="{point_cloud}" point_cloud_uuid="{request_uuid}" uuid="{take_snapshot.uuid}"/>
                <Action ID="UpdatePlanningScene" point_cloud="{point_cloud}" sensor_name="scene_scan_camera" point_cloud_uuid="{request_uuid}" pcd_topic="/pcd_pointcloud_captures"/>
                <Action ID="WaitForDuration" delay_duration="15"/>
                <Action ID="MoveToJointState" waypoint_name="Home" planning_group_name="manipulator" controller_names="/joint_trajectory_controller /robotiq_gripper_controller"/>
            </Control>
        </Control>
    </BehaviorTree>
</root>
